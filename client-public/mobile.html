<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
	<script src="scripts/jquery.min.js"></script>
	<script src="https://cdn.socket.io/socket.io-1.2.1.js"></script>
	<script src="scripts/audio.min.js"></script>
	<script >
		Window.socket = io('http://localhost:3000');

		audiojs.events.ready(function() {
			var as = audiojs.createAll();
		});
	</script>
	<link rel="stylesheet" type="text/css" href="css/mobile-style.css"></link>
	<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
</head>
<body>
<div id="game-app" class="app">
	&nbsp;
</div>
<div id="game-over" class="app">
	<h1>GAME OVER!</h1>
</div>

<audio class="audio-hidden" id="glass-break" src="audio/breakeglass.mp3" preload="auto" controls="">


<script>
	$(document).ready(function() {
		var i = document.getElementById("game-app");

		// go full-screen
		if (i.requestFullscreen) {
			i.requestFullscreen();
		} else if (i.webkitRequestFullscreen) {
			i.webkitRequestFullscreen();
		} else if (i.mozRequestFullScreen) {
			i.mozRequestFullScreen();
		} else if (i.msRequestFullscreen) {
			i.msRequestFullscreen();
		} else {
			console.log('no fullscreen :(');
		}


		console.log('connecting');
		var connection = io.connect();

		connection.emit('mobile:register', {});

		function ping(score) {
			console.log('ping');
			connection.emit('mobile:ping', {
				score: score
			});
		}

		connection.on('mobile:type', function(data){
			console.log('got type', data.type);
		});

		connection.on('mobile:stop', function(data){
			console.log('got stop!');
			gameover();
		});


		$("#game-app").on("click", function() {
			console.log('clock click');
			gameover();
		})

		function gameover() {
			$("#game-app").hide();
			$("#game-over").show();
			var glassBreak = document.getElementById("glass-break");
			glassBreak.play();
		}
	});
</script>
</body>
</html>
